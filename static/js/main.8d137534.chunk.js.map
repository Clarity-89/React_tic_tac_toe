{"version":3,"sources":["constants.js","Board.js","utils.js","minimax.js","styles.js","ResultModal.js","TicTacToe.js","App.js","serviceWorker.js","index.js"],"names":["SCORES","1","0","2","GAME_STATES","GAME_MODES","easy","medium","difficult","Board","grid","_this","this","Object","classCallCheck","makeMove","square","player","getEmptySquares","arguments","length","undefined","squares","forEach","i","push","isEmpty","console","log","Math","pow","getWinner","res","el","winningIndex","getStrikethroughStyles","concat","clone","Array","fill","switchPlayer","getRandomInt","min","max","ceil","floor","random","minimax","board","thisScore","mult","String","empty","l","maxScore","bestMove","copy","border","css","_templateObject","customStyles","overlay","backgroundColor","zIndex","ResultModal","_ref","isOpen","close","startNewGame","winner","react_default","a","createElement","StyledModal","onRequestClose","style","ModalWrapper","ModalTitle","ModalContent","ModalFooter","Button","onClick","styled","Modal","ResultModal_templateObject","div","_templateObject2","p","_templateObject3","_templateObject4","_templateObject5","button","_templateObject6","arr","BoardClass","TicTacToe","_useState","useState","human","computer","_useState2","slicedToArray","players","setPlayers","_useState3","_useState4","gameState","setGameState","_useState5","_useState6","setGrid","_useState7","_useState8","setWinner","_useState9","_useState10","nextMove","setNextMove","_useState11","_useState12","modalOpen","setModalOpen","_useState13","_useState14","mode","setMode","useEffect","winnerStr","setTimeout","declareWinner","move","useCallback","index","gridCopy","computerMove","emptyIndices","includes","timeout","clearTimeout","choosePlayer","option","Screen","Inner","ChooseText","onChange","e","target","value","keys","map","key","gameMode","ButtonRow","Container","dims","isActive","Square","data-testid","humanMove","Marker","Strikethrough","styles","ResultModal_ResultModal","TicTacToe_templateObject","TicTacToe_templateObject2","TicTacToe_templateObject3","TicTacToe_templateObject4","TicTacToe_templateObject5","TicTacToe_templateObject6","_templateObject7","_templateObject8","_ref2","_ref3","defaultProps","Main","main","App_templateObject","Footer","footer","App_templateObject2","FooterInner","App_templateObject3","App","Fragment","src_TicTacToe","href","Boolean","window","location","hostname","match","setAppElement","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.8d137534.chunk.js","sourcesContent":["//Board dimensions\nexport const DIMS = 3;\nexport const DRAW = 0;\nexport const PLAYER_X = 1;\nexport const PLAYER_O = 2;\nexport const SCORES = {\n  1: 1,\n  0: 0,\n  2: -1\n};\nexport const SQUARE_DIMS = 100;\nexport const GAME_STATES = {\n  notStarted: \"not_started\",\n  inProgress: \"in_progress\",\n  over: \"over\"\n};\n\nexport const GAME_MODES = {\n  easy: \"easy\",\n  medium: \"medium\",\n  difficult: \"difficult\"\n};\n","import { DIMS, DRAW } from \"./constants\";\n\nexport default class Board {\n  constructor(grid) {\n    this.grid = grid || new Array(DIMS ** 2).fill(null);\n    this.winningIndex = null;\n  }\n\n  makeMove = (square, player) => {\n    if (this.grid[square] === null) {\n      this.grid[square] = player;\n    }\n  };\n\n  // Collect indices of empty squares and return them\n  getEmptySquares = (grid = this.grid) => {\n    let squares = [];\n    grid.forEach((square, i) => {\n      if (square === null) squares.push(i);\n    });\n    return squares;\n  };\n\n  isEmpty = (grid = this.grid) => {\n    console.log(\"gr\", grid);\n    return this.getEmptySquares(grid).length === DIMS ** 2;\n  };\n\n  getWinner = (grid = this.grid) => {\n    const winningCombos = [\n      [0, 1, 2],\n      [3, 4, 5],\n      [6, 7, 8],\n      [0, 3, 6],\n      [1, 4, 7],\n      [2, 5, 8],\n      [0, 4, 8],\n      [2, 4, 6]\n    ];\n    let res = null;\n    winningCombos.forEach((el, i) => {\n      if (\n        grid[el[0]] !== null &&\n        grid[el[0]] === grid[el[1]] &&\n        grid[el[0]] === grid[el[2]]\n      ) {\n        res = grid[el[0]];\n        this.winningIndex = i;\n      } else if (res === null && this.getEmptySquares(grid).length === 0) {\n        res = DRAW;\n        this.winningIndex = null;\n      }\n    });\n    return res;\n  };\n\n  getStrikethroughStyles = () => {\n    const defaultWidth = 285;\n    const diagonalWidth = 400;\n    switch (this.winningIndex) {\n      case 0:\n        return `\n          transform: none;\n          top: 41px;\n          left: 15px;\n          width: ${defaultWidth}px;\n        `;\n      case 1:\n        return `\n          transform: none;\n          top: 140px;\n          left: 15px;\n          width: ${defaultWidth}px;\n        `;\n      case 2:\n        return `\n          transform: none;\n          top: 242px;\n          left: 15px;\n          width: ${defaultWidth}px;\n        `;\n      case 3:\n        return `\n          transform: rotate(90deg);\n          top: 145px;\n          left: -86px;\n          width: ${defaultWidth}px;\n        `;\n      case 4:\n        return `\n          transform: rotate(90deg);\n          top: 145px;\n          left: 15px;\n          width: ${defaultWidth}px;\n        `;\n      case 5:\n        return `\n          transform: rotate(90deg);\n          top: 145px;\n          left: 115px;\n          width: ${defaultWidth}px;\n        `;\n      case 6:\n        return `\n          transform: rotate(45deg);\n          top: 145px;\n          left: -44px;\n          width: ${diagonalWidth}px;\n        `;\n      case 7:\n        return `\n          transform: rotate(-45deg);\n          top: 145px;\n          left: -46px;\n          width: ${diagonalWidth}px;\n        `;\n      default:\n        return null;\n    }\n  };\n\n  clone = () => {\n    return new Board(this.grid.concat());\n  };\n}\n","import { PLAYER_O, PLAYER_X } from \"./constants\";\n\nexport const switchPlayer = player => {\n  return player === PLAYER_X ? PLAYER_O : PLAYER_X;\n};\n\nexport const getRandomInt = (min, max) => {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n","import { SCORES } from \"./constants\";\nimport { switchPlayer } from \"./utils\";\n\nexport const minimax = (board, player) => {\n  //console.log(\"gr\", board);\n  const mult = SCORES[String(player)];\n  const empty = board.getEmptySquares();\n  // console.log(\"em\", empty);\n  const l = empty.length;\n  let thisScore;\n  let maxScore = -1;\n  let bestMove = null;\n\n  if (board.getWinner() !== null) {\n    return [SCORES[board.getWinner()], 0];\n  } else {\n    for (let i = 0; i < l; i++) {\n      let copy = board.clone();\n      copy.makeMove(empty[i], player);\n      thisScore = mult * minimax(copy, switchPlayer(player))[0];\n\n      if (thisScore >= maxScore) {\n        maxScore = thisScore;\n        bestMove = empty[i];\n      }\n    }\n\n    return [mult * maxScore, bestMove];\n  }\n};\n","import { css } from \"styled-components\";\n\nexport const border = css`\n  border-bottom-left-radius: 15px 255px;\n  border-bottom-right-radius: 225px 15px;\n  border-top-left-radius: 255px 15px;\n  border-top-right-radius: 15px 225px;\n  border: 2px solid #41403e;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport Modal from \"react-modal\";\nimport { border } from \"./styles\";\n\nconst customStyles = {\n  overlay: {\n    backgroundColor: \"rgba(0,0,0, 0.6)\",\n    zIndex: 1049\n  }\n};\n\nexport const ResultModal = ({ isOpen, close, startNewGame, winner }) => {\n  return (\n    <StyledModal isOpen={isOpen} onRequestClose={close} style={customStyles}>\n      <ModalWrapper>\n        <ModalTitle>Game over</ModalTitle>\n        <ModalContent>{winner}</ModalContent>\n\n        <ModalFooter>\n          <Button onClick={close}>Close</Button>\n          <Button onClick={startNewGame}>Start over</Button>\n        </ModalFooter>\n      </ModalWrapper>\n    </StyledModal>\n  );\n};\nconst StyledModal = styled(Modal)`\n  height: 300px;\n  position: relative;\n  margin: 0 auto;\n  top: 10%;\n  right: auto;\n  bottom: auto;\n  width: 320px;\n  outline: none;\n  display: flex;\n  flex-direction: column;\n  z-index: 1050;\n`;\nconst ModalWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 24px;\n  background-color: #fff;\n  max-height: 100%;\n  height: 100%;\n  align-items: center;\n  backface-visibility: hidden;\n  border: 2px solid #e6e7e9;\n  padding: 1.25rem;\n  ${border}\n`;\n\nconst ModalTitle = styled.p`\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n  font-size: 24px;\n  font-weight: bold;\n  text-transform: uppercase;\n`;\n\nconst ModalContent = styled.p`\n  flex: 1 1 auto;\n  text-align: center;\n`;\n\nconst ModalFooter = styled.div`\n  display: flex;\n  justify-content: space-between;\n  flex: 0 0 auto;\n  width: 100%;\n`;\n\nconst Button = styled.button`\n  font-size: 16px;\n`;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport {\n  PLAYER_X,\n  PLAYER_O,\n  SQUARE_DIMS,\n  DRAW,\n  GAME_STATES,\n  DIMS,\n  GAME_MODES\n} from \"./constants\";\nimport BoardClass from \"./Board\";\nimport { getRandomInt, switchPlayer } from \"./utils\";\nimport { minimax } from \"./minimax\";\nimport { ResultModal } from \"./ResultModal\";\nimport { border } from \"./styles\";\n\nconst arr = new Array(DIMS ** 2).fill(null);\nconst board = new BoardClass();\n\nconst TicTacToe = () => {\n  const [players, setPlayers] = useState({ human: null, computer: null });\n  const [gameState, setGameState] = useState(GAME_STATES.notStarted);\n  const [grid, setGrid] = useState(arr);\n  const [winner, setWinner] = useState(null);\n  const [nextMove, setNextMove] = useState(null);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [mode, setMode] = useState(GAME_MODES.medium);\n\n  /**\n   * On every move, check if there is a winner. If yes, set game state to over and open result modal\n   */\n  useEffect(() => {\n    const winner = board.getWinner(grid);\n    const declareWinner = winner => {\n      let winnerStr;\n      switch (winner) {\n        case PLAYER_X:\n          winnerStr = \"Player X wins!\";\n          break;\n        case PLAYER_O:\n          winnerStr = \"Player O wins!\";\n          break;\n        case DRAW:\n        default:\n          winnerStr = \"It's a draw\";\n      }\n      setGameState(GAME_STATES.over);\n      setWinner(winnerStr);\n      // Slight delay for the modal so there is some time to see the last move\n      setTimeout(() => setModalOpen(true), 300);\n    };\n\n    if (winner !== null && gameState !== GAME_STATES.over) {\n      declareWinner(winner);\n    }\n  }, [gameState, grid, nextMove]);\n\n  /**\n   * Set the grid square with respective player that made the move. Only make a move when the game is in progress.\n   * useCallback is necessary to prevent unnecessary recreation of the function, unless gameState changes, since it is\n   * being tracked in useEffect\n   * @type {Function}\n   */\n  const move = useCallback(\n    (index, player) => {\n      if (player && gameState === GAME_STATES.inProgress) {\n        setGrid(grid => {\n          const gridCopy = grid.concat();\n          gridCopy[index] = player;\n          return gridCopy;\n        });\n      }\n    },\n    [gameState]\n  );\n\n  /**\n   * Make computer move. If it's the first move (board is empty), make move at any random cell to skip\n   * unnecessary minimax calculations\n   * @type {Function}\n   */\n  const computerMove = useCallback(() => {\n    // Important to pass a copy of the grid here\n    const board = new BoardClass(grid.concat());\n    const emptyIndices = board.getEmptySquares(grid);\n    let index;\n    switch (mode) {\n      case GAME_MODES.easy:\n        index = getRandomInt(0, 8);\n        while (!emptyIndices.includes(index)) {\n          index = getRandomInt(0, 8);\n        }\n        break;\n      case GAME_MODES.medium:\n        // Medium level is basically ~half of the moves are minimax and the other ~half random\n        const smartMove = !board.isEmpty(grid) && Math.random() < 0.5;\n        if (smartMove) {\n          index = minimax(board, players.computer)[1];\n        } else {\n          index = getRandomInt(0, 8);\n          while (!emptyIndices.includes(index)) {\n            index = getRandomInt(0, 8);\n          }\n        }\n        break;\n      case GAME_MODES.difficult:\n      default:\n        index = board.isEmpty(grid)\n          ? getRandomInt(0, 8)\n          : minimax(board, players.computer)[1];\n    }\n    if (!grid[index]) {\n      move(index, players.computer);\n      setNextMove(players.human);\n    }\n  }, [move, grid, players, mode]);\n\n  /**\n   * Make computer move when it's computer's turn\n   */\n  useEffect(() => {\n    let timeout;\n    if (\n      nextMove !== null &&\n      nextMove === players.computer &&\n      gameState !== GAME_STATES.over\n    ) {\n      // Delay computer moves to make them more natural\n      timeout = setTimeout(() => {\n        computerMove();\n      }, 500);\n    }\n    return () => timeout && clearTimeout(timeout);\n  }, [nextMove, computerMove, players.computer, gameState]);\n\n  const humanMove = index => {\n    if (!grid[index] && nextMove === players.human) {\n      move(index, players.human);\n      setNextMove(players.computer);\n    }\n  };\n\n  const choosePlayer = option => {\n    setPlayers({ human: option, computer: switchPlayer(option) });\n    setGameState(GAME_STATES.inProgress);\n    setNextMove(PLAYER_X);\n  };\n\n  const startNewGame = () => {\n    setGameState(GAME_STATES.notStarted);\n    setGrid(arr);\n    setModalOpen(false);\n  };\n\n  const changeMode = e => {\n    setMode(e.target.value);\n  };\n\n  return gameState === GAME_STATES.notStarted ? (\n    <Screen>\n      <Inner>\n        <ChooseText>Select difficulty</ChooseText>\n        <select onChange={changeMode} value={mode}>\n          {Object.keys(GAME_MODES).map(key => {\n            const gameMode = GAME_MODES[key];\n            return (\n              <option key={gameMode} value={gameMode}>\n                {key}\n              </option>\n            );\n          })}\n        </select>\n      </Inner>\n      <Inner>\n        <ChooseText>Choose your player</ChooseText>\n        <ButtonRow>\n          <button onClick={() => choosePlayer(PLAYER_X)}>X</button>\n          <p>or</p>\n          <button onClick={() => choosePlayer(PLAYER_O)}>O</button>\n        </ButtonRow>\n      </Inner>\n    </Screen>\n  ) : (\n    <Container dims={DIMS}>\n      {grid.map((value, index) => {\n        const isActive = value !== null;\n\n        return (\n          <Square\n            data-testid=\"square\"\n            key={index}\n            onClick={() => humanMove(index)}\n          >\n            {isActive && <Marker>{value === PLAYER_X ? \"X\" : \"O\"}</Marker>}\n          </Square>\n        );\n      })}\n      <Strikethrough\n        styles={\n          gameState === GAME_STATES.over && board.getStrikethroughStyles(grid)\n        }\n      />\n      <ResultModal\n        isOpen={modalOpen}\n        winner={winner}\n        close={() => setModalOpen(false)}\n        startNewGame={startNewGame}\n      />\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  width: ${({ dims }) => `${dims * (SQUARE_DIMS + 5)}px`};\n  flex-flow: wrap;\n  position: relative;\n`;\n\nconst Square = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: ${SQUARE_DIMS}px;\n  height: ${SQUARE_DIMS}px;\n  ${border}\n\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst Marker = styled.p`\n  font-size: 68px;\n`;\n\nconst ButtonRow = styled.div`\n  display: flex;\n  width: 150px;\n  justify-content: space-between;\n`;\n\nconst Screen = styled.div``;\n\nconst Inner = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 30px;\n`;\nconst ChooseText = styled.p``;\n\nconst Strikethrough = styled.div`\n  position: absolute;\n  ${({ styles }) => styles}\n  background-color: indianred;\n  height: 5px;\n  width: ${({ styles }) => !styles && \"0px\"};\n`;\n\nTicTacToe.propTypes = {\n  dims: PropTypes.number\n};\n\nTicTacToe.defaultProps = {\n  dims: 3\n};\nexport default TicTacToe;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport TicTacToe from \"./TicTacToe\";\nimport \"papercss/dist/paper.min.css\";\n\nfunction App() {\n  return (\n    <>\n      <Main>\n        <TicTacToe />\n      </Main>\n      <Footer>\n        <FooterInner>\n          View the code on{\" \"}\n          <a href=\"https://github.com/Clarity-89/React_tic_tac_toe\">Github</a>\n        </FooterInner>\n      </Footer>\n    </>\n  );\n}\n\nconst Main = styled.main`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  flex: 1 0 auto;\n`;\n\nconst Footer = styled.footer`\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  flex: 0 0 auto;\n`;\n\nconst FooterInner = styled.div`\n  padding: 16px 0;\n`;\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport Modal from \"react-modal\";\nModal.setAppElement(\"#root\");\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}